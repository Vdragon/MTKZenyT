#!/bin/bash

function dialog_info() {

    # call: display_info
    local text="$1" sec="$2"

    if [[ -z "${sec}" ]]; then sec=1; fi

    ${dialog} --colors --infobox "${text}" 0 0 ; sleep ${sec}

    unset text

}

function dialog_input() {

    # call: display_input text title
    local text="$1" title="$2"

    ${dialog} --stdout --title "${title}" --inputbox "${text}" 10 30 ; echo $? > "${SCRIPT_TMP_DIR}input.tmp"

    unset text title

}

function dialog_list_files() {

    # call: display_files text title count
    #local height=$(bc <<< "${#mtd_name[@]} * 10 + 5")
    local text="$1" title="$2" items="$3" height="$4"

    ${dialog} --backtitle "${title}" --title "${title}" \
        --ok-label "${text_label_ok}" --cancel-label "${text_label_cancel}" \
        --checklist "${text}" 0 0 ${height} ${items} 2> "${SCRIPT_TMP_DIR}checklist_reply.tmp"

    case $? in
        1|255)
            display_mssg "q" "${text_gui_cancel}"

            case "${read}" in
                0) display_menu ;;
                1|255) display_files ;;
            esac
        ;;
    esac

    unset texte title items height

}

function dialog_menu() {

    # call: dialog menu text title
    local text="$1" title="$2" height=$(bc <<< "$3 * 10 + 5")

    ${dialog} --backtitle "${title}" --title "${title}" \
        --menu "${text}" 0 0 ${height} "${menu[@]}" 2>&1 1>&3
        #--menu "${text}" 0 0 ${height} "${menu[@]}" 2> "${FILE_TMP}"

    unset text title height

}

function dialog_mssg() {

    # call: dialog_mssg text title
    local text="$1" title="$2"

    ${dialog} --colors --title "${title}" --msgbox "${text}" 0 0

    unset text title

}

function dialog_progress() {

    local text="$1" title="$2"

    ${dialog} --title "${title}" --gauge "${text}" 10 60 0

    unset text title

}

function dialog_select_dir() {

    # call: dialog_select_dir title
    local title="$1"

    ${dialog} --stdout --title "${title}" --dselect "${HOME}" 0 0

    unset title

}

function dialog_select_file() {

    # call: dialog_select_file title
    local title="$1"

    ${dialog} --stdout --title "${title}" --fselect "${HOME}" 0 50

    unset title

}

function dialog_yesno() {

    # call: dialog_yesno
    local text="$1" title="$2"

    ${dialog} --clear --title "${title}" --yesno "${text}" 10 30 ; echo $? > "${SCRIPT_TMP_DIR}yesno.tmp"

    unset text title

}
